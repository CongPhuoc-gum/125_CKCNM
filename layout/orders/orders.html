<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <title>ÄÆ¡n hÃ ng cá»§a tÃ´i | SnackFood</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- CSS dÃ¹ng chung vá»›i HOME -->
  <link rel="stylesheet" href="../home/styles.css">
  <!-- CSS riÃªng cho checkout -->
  <link rel="stylesheet" href="checkout.css">
</head>
<body>

<div class="site">

<!-- ===== HEADER (COPY Tá»ª HOME) ===== -->
<header>
  <a class="brand" href="../home/home.html">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRoV0_K78ROk_yDSrCyKON-JkXA5uWF9gxe4A&s" alt="SnackFood">
    <div>
      <h1>SnackFood</h1>
      <div>Shop chuyÃªn bÃ¡n Ä‘á»“ khÃ´</div>
    </div>
  </a>

  <div class="menu-wrapper">
    <button id="menu-toggle">
      Danh Má»¥c <span class="arrow">â–¼</span>
    </button>
    <div id="dropdown-menu" class="dropdown-menu">
      <a href="../home/home.html#products" class="menu-item">ğŸ”¥ BÃ¡n Cháº¡y</a>
      <a href="../home/home.html#best" class="menu-item">ğŸ“¦ Táº¥t Cáº£ Sáº£n Pháº©m</a>
      <a href="#" class="menu-item">ğŸ¦‘ Má»±c KhÃ´</a>
      <a href="#" class="menu-item">ğŸŸ CÃ¡ KhÃ´</a>
      <a href="#" class="menu-item">ğŸ¥œ Háº¡t & Snack</a>
      <a href="#" class="menu-item">ğŸŠ TrÃ¡i CÃ¢y Sáº¥y</a>
      <a href="../home/home.html#contact" class="menu-item">ğŸ“ LiÃªn Há»‡</a>
    </div>
  </div>

  <div class="search" role="search">
    <input type="search" placeholder="TÃ¬m kiáº¿m sáº£n pháº©m...">
    <button>ğŸ”</button>
  </div>

  <button id="cart-btn">
    ğŸ›’ <span id="cart-count">0</span>
  </button>

  <div id="user-area"></div>
</header>

<div id="dropdown-overlay"></div>

<!-- ===== CONTENT ===== -->
<main class="orders-page">

  <h2>ğŸ“¦ ÄÆ¡n hÃ ng cá»§a tÃ´i</h2>

  <div id="orders-list" class="orders-list"></div>

  <div id="empty-orders" class="empty-orders">
    Báº¡n chÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o ğŸ˜¢  
    <br><br>
    <a href="../home/home.html" class="back-home">Mua sáº¯m ngay</a>
  </div>

</main>

</div>

<!-- ===== SCRIPT ===== -->
<script>
/* ===== USER CHECK ===== */
(function(){
  const userArea = document.getElementById("user-area");
  const user = localStorage.getItem("snack_username");

  if(!user){
    window.location.href = "../login/login.html";
    return;
  }

  userArea.innerHTML =
    'Xin chÃ o, ' + user +
    ' <button id="logoutBtn">ÄÄƒng xuáº¥t</button>';

  document.getElementById("logoutBtn").onclick = function(){
    localStorage.removeItem("snack_username");
    window.location.href = "../login/login.html";
  };
})();

/* ===== LOAD ORDERS ===== */
const orders = JSON.parse(localStorage.getItem("snack_orders")) || [];
const list = document.getElementById("orders-list");
const empty = document.getElementById("empty-orders");

if(orders.length === 0){
  empty.style.display = "block";
} else {
  empty.style.display = "none";
  orders.reverse().forEach(renderOrder);
}

function renderOrder(order){
  const div = document.createElement("div");
  div.className = "order-card";

  div.innerHTML = `
    <div class="order-header">
      <strong>MÃ£ Ä‘Æ¡n: #${order.id}</strong>
      <span class="status ${order.status}">
        ${statusText(order.status)}
      </span>
    </div>

    <div class="order-body">
      <p>ğŸ“… NgÃ y Ä‘áº·t: ${order.date}</p>
      <p>ğŸ’° Tá»•ng tiá»n: <strong>${order.total}</strong></p>

      <ul class="order-items">
        ${order.items.map(i =>
          `<li>${i.name} Ã— ${i.qty}</li>`
        ).join("")}
      </ul>
    </div>
  `;
  list.appendChild(div);
}

function statusText(s){
  if(s==="processing") return "â³ Äang xá»­ lÃ½";
  if(s==="shipping") return "ğŸšš Äang giao";
  return "âœ… HoÃ n thÃ nh";
}
</script>

</body>
</html>
